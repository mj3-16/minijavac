plugins {
    id 'me.champeau.gradle.jmh' version '0.3.1'
}

apply plugin: 'application'
apply plugin: 'idea'
apply plugin: 'eclipse'

mainClassName = "minijava.Main"

// policy is to have a 'build' script; that requires us to have a non-default build directory
buildDir = 'build_dir'

test {
    //jvmArgs = ['-XX:+PrintCompilation']
}

jmh {
    fork = 0
    warmupIterations = 2
    iterations = 10
    benchmarkMode = ['avgt']
    timeUnit = 'ns'
    include=''
    jvmArgs = ['-Xmx4g'] // set max heap size to 4 gigs
    humanOutputFile = project.file("${project.buildDir}/reports/jmh/human.txt")
}

repositories {
    mavenCentral()
}

dependencies {
    compile 'commons-io:commons-io:2.4'
    compile 'com.intellij:annotations:5.1'
    compile 'org.jooq:jool:0.9.9'
    compile 'org.slf4j:slf4j-nop:1.7.13'
    testCompile 'com.pholser:junit-quickcheck-core:0.6-alpha-3'
    testCompile 'com.pholser:junit-quickcheck-generators:0.6-alpha-3'
    testCompile 'junit:junit:4.12'
}